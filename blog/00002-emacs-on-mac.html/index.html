<!DOCTYPE html>
<html lang="zh">
  <head>
    <title>emacs 在Mac上的安装及一些相应配置 - 拾遗笔记</title>
    <meta charset="utf-8" />
    <meta name="author" content="纪秀峰" />
    <meta name="description" content="emacs 在Mac上的安装" />
    <meta name="keywords" content="" />
    <link rel="stylesheet" href="/media/css/main.css" type="text/css">
    <!-- <link rel="stylesheet" href="/media/css/prettify.css" type="text/css"> -->
  </head>
  <body class="container">
<script async src="http://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<!-- ji -->
<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-6633117582073327"
     data-ad-slot="1629980291"
     data-ad-format="link"></ins>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>

    
    <div>
      <header class="masthead">
        <h1 class="masthead-title"><a href="/">拾遗笔记</a></h1>
        <p></p>
        <ul>
          <li><a href="/blog/">Blog</a></li>
          <li><a href="/tags/">Tags</a></li>
          <li><a href="/about/">About</a></li>
          <li><a href="http://github.com/jixiuf">GitHub</a></li>
          <li><a href="/rss.xml">RSS</a></li>
        </ul>
        <form method="get" id="searchform" action="http://www.google.com/search">
          <input type="text" class="field" name="q" id="s" placeholder="Search">
          <input type="hidden" name="as_sitesearch" value="jixiuf.github.io">
        </form>
      </header>
    </div>

<div>
<div class="post">
<h1>emacs 在Mac上的安装及一些相应配置</h1>
<div id="table-of-contents">
<h2>Table of Contents</h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#org397f09a">GNU Emacs For Mac OS X&#xa0;&#xa0;&#xa0;<span class="tag"><span class="Emacs">Emacs</span></span></a></li>
<li><a href="#orgb19bcb6">使用brew 命令安装</a>
<ul>
<li><a href="#org85a0c03">安装 带图形界面的emacs</a></li>
<li><a href="#orgd8b155f">安装 不带图形界面的emacs,只能在终端下使用的，</a></li>
</ul>
</li>
<li><a href="#org3bf6f7e">从源代码编译emacs</a>
<ul>
<li><a href="#org7c584fc">获取emacs 源码</a></li>
<li><a href="#org350243c">只编译终端下可用的版本 编译完后 会安装到/usr/local/bin/下</a></li>
<li><a href="#org1e15d69">编译 图形界面的</a></li>
</ul>
</li>
<li><a href="#orgfce98ce">mac 启动时自动启动 emacs &#x2013;daemon进程</a></li>
<li><a href="#orgeda7832">~/bin/em emacsclient 封装</a></li>
<li><a href="#org9e1ea76">让emacs 支持编辑 plist 文件</a></li>
<li><a href="#org0c05a5a">让emacs 支持编辑 applescript 脚本</a></li>
<li><a href="#org6f59c1d">emacs 与 iTerm2</a>
<ul>
<li><a href="#org5c42449">iTerm2 下 的emacs 绑定 C-, C-; Ctrl-return 等按键的问题</a></li>
<li><a href="#org16b063f">在Finder 中使用iTerm2 中的emacs/emacsclient 打开文件</a></li>
</ul>
</li>
</ul>
</div>
</div>
<div id="outline-container-org397f09a" class="outline-2">
<h2 id="org397f09a">GNU Emacs For Mac OS X&#xa0;&#xa0;&#xa0;<span class="tag"><span class="Emacs">Emacs</span></span></h2>
<div class="outline-text-2" id="text-org397f09a">
<p>
<a href="http://emacsformacosx.com/">http://emacsformacosx.com/</a><br />
  去这里下载 ，下载完  托动到 /Applications/目录就可以了<br />
</p>
</div>
</div>
<div id="outline-container-orgb19bcb6" class="outline-2">
<h2 id="orgb19bcb6">使用brew 命令安装</h2>
<div class="outline-text-2" id="text-orgb19bcb6">
</div>
<div id="outline-container-org85a0c03" class="outline-3">
<h3 id="org85a0c03">安装 带图形界面的emacs</h3>
<div class="outline-text-3" id="text-org85a0c03">
<div class="org-src-container">
<pre class="src src-sh">brew install emacs --cocoa
</pre>
</div>
</div>
</div>
<div id="outline-container-orgd8b155f" class="outline-3">
<h3 id="orgd8b155f">安装 不带图形界面的emacs,只能在终端下使用的，</h3>
<div class="outline-text-3" id="text-orgd8b155f">
<p>
mac 自带了emacs22 ，但是版本太老所以需要删掉<br />
</p>
<div class="org-src-container">
<pre class="src src-sh">sudo rm -f /usr/bin/emacs
sudo rm -f /usr/bin/emacsclient
brew install emacs
</pre>
</div>
<p>
为方便终端下使用 定义些别名<br />
</p>
<div class="org-src-container">
<pre class="src src-sh">alias <span style="color: #40E0D0;">e</span>=<span style="color: #ffa07a;">'emacs -nw'</span>
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-org3bf6f7e" class="outline-2">
<h2 id="org3bf6f7e">从源代码编译emacs</h2>
<div class="outline-text-2" id="text-org3bf6f7e">
</div>
<div id="outline-container-org7c584fc" class="outline-3">
<h3 id="org7c584fc">获取emacs 源码</h3>
<div class="outline-text-3" id="text-org7c584fc">
<div class="org-src-container">
<pre class="src src-sh">git clone  git://git.sv.gnu.org/emacs.git
&#25110;&#32773;
git clone  git://git.sv.gnu.org/emacs.git --depth=1
</pre>
</div>
</div>
</div>
<div id="outline-container-org350243c" class="outline-3">
<h3 id="org350243c">只编译终端下可用的版本 编译完后 会安装到/usr/local/bin/下</h3>
<div class="outline-text-3" id="text-org350243c">
<div class="org-src-container">
<pre class="src src-sh">  <span style="color: #F8F8F8;">cd</span> emacs
  ./configure --without-ns
  or
  ./configure --disable-ns-self-contained
  make
  make install
<span style="color: #AEAEAE;">#</span><span style="color: #AEAEAE;">+BEGIN_QUOTE</span>
    If you pass the --disable-ns-self-contained option to configure, the lisp
    files will be installed under whatever <span style="color: #ffa07a;">'prefix'</span> is set to (defaults to
    /usr/local).  The bundle will be smaller, but depend on these resources (may
    require <span style="color: #ffa07a;">'sudo'</span> for <span style="color: #ffa07a;">"make install"</span>).
<span style="color: #AEAEAE;">#</span><span style="color: #AEAEAE;">+END_QUOTE</span>

</pre>
</div>
</div>
</div>
<div id="outline-container-org1e15d69" class="outline-3">
<h3 id="org1e15d69">编译 图形界面的</h3>
<div class="outline-text-3" id="text-org1e15d69">
<div class="org-src-container">
<pre class="src src-sh"><span style="color: #F8F8F8;">cd</span> emacs
 ./configure
 make
 make install
</pre>
</div>
<p>
编译完之后 会生成nextstep/Emacs.app<br />
把Emacs.app 移动到/Applications/目录即可<br />
</p>
</div>
</div>
</div>

<div id="outline-container-orgfce98ce" class="outline-2">
<h2 id="orgfce98ce">mac 启动时自动启动 emacs &#x2013;daemon进程</h2>
<div class="outline-text-2" id="text-orgfce98ce">
<p>
~/Library/LaunchAgents/emacs-daemon.plist<br />
把这个文件放到~/Library/LaunchAgents/目录下 ，重起下电脑，就会启动emacs &#x2013;deamon 进程<br />
或者执行下<br />
</p>
<div class="org-src-container">
<pre class="src src-sh">launchctl load ~/Library/LaunchAgents/emacs-daemon.plist
</pre>
</div>
<div class="org-src-container">
<pre class="src src-xml">&lt;?<span style="color: #FBDE2D;">xml</span> <span style="color: #ffa07a;">version="1.0" encoding="UTF-8"</span>?&gt;
&lt;!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd"&gt;
&lt;<span style="color: #FF6400;">plist</span> <span style="color: #40E0D0;">version</span>=<span style="color: #ffa07a;">"1.0"</span>&gt;
&lt;<span style="color: #FF6400;">dict</span>&gt;
    &lt;<span style="color: #FF6400;">key</span>&gt;EnableGlobbing&lt;/<span style="color: #FF6400;">key</span>&gt;
    &lt;<span style="color: #FF6400;">true</span>/&gt;
    &lt;<span style="color: #FF6400;">key</span>&gt;KeepAlive&lt;/<span style="color: #FF6400;">key</span>&gt;
    &lt;<span style="color: #FF6400;">true</span>/&gt;
    &lt;<span style="color: #FF6400;">key</span>&gt;Label&lt;/<span style="color: #FF6400;">key</span>&gt;
    &lt;<span style="color: #FF6400;">string</span>&gt;emacs-daemon&lt;/<span style="color: #FF6400;">string</span>&gt;
    &lt;<span style="color: #FF6400;">key</span>&gt;ProgramArguments&lt;/<span style="color: #FF6400;">key</span>&gt;
    &lt;<span style="color: #FF6400;">array</span>&gt;
        &lt;<span style="color: #FF6400;">string</span>&gt;/usr/local/bin/emacs&lt;/<span style="color: #FF6400;">string</span>&gt;
        &lt;<span style="color: #FF6400;">string</span>&gt;--daemon&lt;/<span style="color: #FF6400;">string</span>&gt;
    &lt;/<span style="color: #FF6400;">array</span>&gt;
    &lt;<span style="color: #FF6400;">key</span>&gt;RunAtLoad&lt;/<span style="color: #FF6400;">key</span>&gt;
    &lt;<span style="color: #FF6400;">true</span>/&gt;
    &lt;<span style="color: #FF6400;">key</span>&gt;WorkingDirectory&lt;/<span style="color: #FF6400;">key</span>&gt;
    &lt;<span style="color: #FF6400;">string</span>&gt;/Users/&lt;/<span style="color: #FF6400;">string</span>&gt;
&lt;/<span style="color: #FF6400;">dict</span>&gt;
&lt;/<span style="color: #FF6400;">plist</span>&gt;
</pre>
</div>
</div>
</div>
<div id="outline-container-orgeda7832" class="outline-2">
<h2 id="orgeda7832">~/bin/em emacsclient 封装</h2>
<div class="outline-text-2" id="text-orgeda7832">
<p>
写了个脚本命名为  ~/bin/em  封装emacsclient,配合emacs &#x2013;daemon 使用<br />
</p>
<div class="org-src-container">
<pre class="src src-sh"><span style="color: #AEAEAE;">#</span><span style="color: #AEAEAE;">!/bin/</span><span style="color: #FBDE2D;">sh</span>
<span style="color: #AEAEAE;"># </span><span style="color: #AEAEAE;">use default emacsclient in $PATH</span>
<span style="color: #40E0D0;">EMACSCLIENT</span>=<span style="font-weight: bold;">`command -v emacsclient`</span>
<span style="color: #AEAEAE;"># </span><span style="color: #AEAEAE;">if emacsclient major version ==22</span>
<span style="color: #FBDE2D;">if</span> [ ! -z $<span style="color: #40E0D0;">EMACSCLIENT</span> ] &amp;&amp; [ <span style="font-weight: bold;">`$EMACSCLIENT --version 2&gt;&amp;1| awk -F ' ' '/emacsclient/ {print $2}'|awk -F '.' '{print $1}'`</span> = <span style="color: #ffa07a;">"22"</span> ] ; <span style="color: #FBDE2D;">then</span>
    <span style="color: #40E0D0;">EMACSCLIENT</span>=<span style="color: #ffa07a;">""</span>
<span style="color: #FBDE2D;">fi</span>
<span style="color: #AEAEAE;">#  </span><span style="color: #AEAEAE;">if EMACSCLIENT is empty</span>
<span style="color: #FBDE2D;">if</span> [  -z $<span style="color: #40E0D0;">EMACSCLIENT</span> ] &amp;&amp; [ -x <span style="color: #ffa07a;">"~/bin/emacsclient"</span>  ] &amp;&amp; [ <span style="font-weight: bold;">`~/bin/emacsclient --version 2&gt;&amp;1| awk -F ' ' '/emacsclient/ {print $2}'|awk -F '.' '{print $1}'`</span> != <span style="color: #ffa07a;">"22"</span> ]; <span style="color: #FBDE2D;">then</span>
    <span style="color: #40E0D0;">EMACSCLIENT</span>=<span style="color: #ffa07a;">"~/bin/emacsclient"</span>
<span style="color: #FBDE2D;">fi</span>

<span style="color: #FBDE2D;">if</span> [  -z $<span style="color: #40E0D0;">EMACSCLIENT</span> ] &amp;&amp; [ -x <span style="color: #ffa07a;">"/usr/local/bin/emacsclient"</span>  ] &amp;&amp; [ <span style="font-weight: bold;">`/usr/local/bin/emacsclient --version 2&gt;&amp;1| awk -F ' ' '/emacsclient/ {print $2}'|awk -F '.' '{print $1}'`</span> != <span style="color: #ffa07a;">"22"</span> ]; <span style="color: #FBDE2D;">then</span>
    <span style="color: #40E0D0;">EMACSCLIENT</span>=<span style="color: #ffa07a;">"/usr/local/bin/emacsclient"</span>
<span style="color: #FBDE2D;">fi</span>
<span style="color: #FBDE2D;">if</span> [  -z $<span style="color: #40E0D0;">EMACSCLIENT</span> ] &amp;&amp; [ -x <span style="color: #ffa07a;">"/usr/bin/emacsclient"</span>  ] &amp;&amp; [ <span style="font-weight: bold;">`/usr/bin/emacsclient --version 2&gt;&amp;1| awk -F ' ' '/emacsclient/ {print $2}'|awk -F '.' '{print $1}'`</span> != <span style="color: #ffa07a;">"22"</span> ]; <span style="color: #FBDE2D;">then</span>
    <span style="color: #40E0D0;">EMACSCLIENT</span>=<span style="color: #ffa07a;">"/usr/bin/emacsclient"</span>
<span style="color: #FBDE2D;">fi</span>

<span style="color: #FBDE2D;">if</span> [  -z $<span style="color: #40E0D0;">EMACSCLIENT</span> ] &amp;&amp; [ -x <span style="color: #ffa07a;">"/Applications/Emacs.app/Contents/MacOS/bin/emacsclient"</span>  ]; <span style="color: #FBDE2D;">then</span>
    <span style="color: #40E0D0;">EMACSCLIENT</span>=<span style="color: #ffa07a;">"/Applications/Emacs.app/Contents/MacOS/bin/emacsclient"</span>
<span style="color: #FBDE2D;">fi</span>

<span style="color: #FBDE2D;">if</span> [  -z $<span style="color: #40E0D0;">EMACSCLIENT</span> ] ; <span style="color: #FBDE2D;">then</span>
    <span style="color: #F8F8F8;">echo</span> <span style="color: #ffa07a;">"can not find emacsclient exit"</span>
    <span style="color: #FBDE2D;">exit</span> 1
<span style="color: #FBDE2D;">fi</span>

<span style="color: #FBDE2D;">if</span> [ -z <span style="color: #ffa07a;">"$1"</span> ]
<span style="color: #FBDE2D;">then</span>
    <span style="color: #AEAEAE;">#</span><span style="color: #AEAEAE;">/usr/bin/emacsclient -t  --socket-name=$HOME/.emacs.d/cache/emacs-server-file</span>
    $<span style="color: #40E0D0;">EMACSCLIENT</span> -t  -nw
<span style="color: #FBDE2D;">else</span>
    <span style="color: #AEAEAE;">#</span><span style="color: #AEAEAE;">/usr/bin/emacsclient -t  --socket-name=$HOME/.emacs.d/cache/emacs-server-file "$@"</span>
    $<span style="color: #40E0D0;">EMACSCLIENT</span> -t   -nw <span style="color: #ffa07a;">"$@"</span>
<span style="color: #FBDE2D;">fi</span>
</pre>
</div>
<p>
在 ~/.bashrc 或 ~/.zshrc 中加入以下内容<br />
</p>
<div class="org-src-container">
<pre class="src src-sh"><span style="color: #FBDE2D;">if</span> [ -f /Applications/Emacs.app/Contents/MacOS/Emacs ]; <span style="color: #FBDE2D;">then</span>
    <span style="color: #F8F8F8;">export</span>  <span style="color: #40E0D0;">ALTERNATE_EDITOR</span>=/Applications/Emacs.app/Contents/MacOS/Emacs
<span style="color: #FBDE2D;">fi</span>
<span style="color: #FBDE2D;">if</span> [ -f /usr/local/bin/emacs ]; <span style="color: #FBDE2D;">then</span>
    <span style="color: #F8F8F8;">export</span>  <span style="color: #40E0D0;">ALTERNATE_EDITOR</span>=/usr/local/bin/emacs
<span style="color: #FBDE2D;">fi</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org9e1ea76" class="outline-2">
<h2 id="org9e1ea76">让emacs 支持编辑 plist 文件</h2>
<div class="outline-text-2" id="text-org9e1ea76">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(add-to-list 'jka-compr-compression-info-list
             [<span style="color: #ffa07a;">"\\.plist$"</span>
              <span style="color: #ffa07a;">"converting text XML to binary plist"</span>
              <span style="color: #ffa07a;">"plutil"</span>
              (<span style="color: #ffa07a;">"-convert"</span> <span style="color: #ffa07a;">"binary1"</span> <span style="color: #ffa07a;">"-o"</span> <span style="color: #ffa07a;">"-"</span> <span style="color: #ffa07a;">"-"</span>)
              <span style="color: #ffa07a;">"converting binary plist to text XML"</span>
              <span style="color: #ffa07a;">"plutil"</span>
              (<span style="color: #ffa07a;">"-convert"</span> <span style="color: #ffa07a;">"xml1"</span> <span style="color: #ffa07a;">"-o"</span> <span style="color: #ffa07a;">"-"</span> <span style="color: #ffa07a;">"-"</span>)
              nil nil <span style="color: #ffa07a;">"bplist"</span>])
</pre>
</div>
</div>
</div>
<div id="outline-container-org0c05a5a" class="outline-2">
<h2 id="org0c05a5a">让emacs 支持编辑 applescript 脚本</h2>
<div class="outline-text-2" id="text-org0c05a5a">
<p>
~/.emacs.d/bin/applescript-helper.sh<br />
</p>
<div class="org-src-container">
<pre class="src src-sh"><span style="color: #AEAEAE;">#</span><span style="color: #AEAEAE;">/bin/sh</span>
<span style="color: #AEAEAE;"># </span><span style="color: #AEAEAE;">mac &#19978; emacs &#30452;&#25509;&#32534;&#36753;&#20108;&#36827;&#21046;applescript</span>
<span style="color: #FBDE2D;">if</span> [ <span style="color: #ffa07a;">"$1"</span> = <span style="color: #ffa07a;">"-d"</span> ]; <span style="color: #FBDE2D;">then</span>
    <span style="color: #40E0D0;">RANDOMFILE</span>=<span style="color: #ffa07a;">"applescript${RANDOM}.scpt"</span>
    cat /dev/stdin &gt;<span style="color: #ffa07a;">"/tmp/$RANDOMFILE"</span>
    osadecompile <span style="color: #ffa07a;">"/tmp/$RANDOMFILE"</span>
    rm <span style="color: #ffa07a;">"/tmp/$RANDOMFILE"</span>
<span style="color: #FBDE2D;">else</span>
    <span style="color: #40E0D0;">RANDOMFILE</span>=<span style="color: #ffa07a;">"applescript${RANDOM}.scpt"</span>
    osacompile -o <span style="color: #ffa07a;">"/tmp/$RANDOMFILE"</span>
    cat <span style="color: #ffa07a;">"/tmp/$RANDOMFILE"</span>
    rm <span style="color: #ffa07a;">"/tmp/$RANDOMFILE"</span>
<span style="color: #FBDE2D;">fi</span>
</pre>
</div>
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #AEAEAE;">;; </span><span style="color: #AEAEAE;"># mac &#19978; emacs &#30452;&#25509;&#32534;&#36753;&#20108;&#36827;&#21046;applescript</span>
(add-to-list 'jka-compr-compression-info-list
             `[<span style="color: #ffa07a;">"\\.scpt\\'"</span>
               <span style="color: #ffa07a;">"converting text applescript to binary applescprit "</span> ,(expand-file-name <span style="color: #ffa07a;">"applescript-helper.sh"</span> <span style="color: #ffa07a;">"~/.emacs.d/bin/"</span>) nil
               <span style="color: #ffa07a;">"converting binary applescript to text applescprit "</span> ,(expand-file-name <span style="color: #ffa07a;">"applescript-helper.sh"</span> <span style="color: #ffa07a;">"~/.emacs.d/bin/"</span>) (<span style="color: #ffa07a;">"-d"</span>)
               nil t <span style="color: #ffa07a;">"FasdUAS"</span>])
</pre>
</div>
</div>
</div>
<div id="outline-container-org6f59c1d" class="outline-2">
<h2 id="org6f59c1d">emacs 与 iTerm2</h2>
<div class="outline-text-2" id="text-org6f59c1d">
</div>
<div id="outline-container-org5c42449" class="outline-3">
<h3 id="org5c42449">iTerm2 下 的emacs 绑定 C-, C-; Ctrl-return 等按键的问题</h3>
<div class="outline-text-3" id="text-org5c42449">
<p>
我喜欢使用 <a href="https://iterm2.com/">iTerm2</a>这款终端<br />
但是在终端下的emacs 有些按键是不能按的,比如C-, C-;<br />
 与<a href="https://iterm2.com/">iTerm2</a> 配合 可以解决这样的问题<br />
 <a href="http://superuser.com/questions/731427/how-do-i-send-ctrl-in-iterm2">http://superuser.com/questions/731427/how-do-i-send-ctrl-in-iterm2</a><br />
 <img src="/assets/blog/00002-emacs-on-mac.html/iterm-key.png" alt="iterm-key.png" /><br />
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp">(global-set-key (kbd <span style="color: #ffa07a;">"C-[ [ a f"</span>) 'backward-kill-word) <span style="color: #AEAEAE;">;</span><span style="color: #AEAEAE;">== "M-[ a f" iterm2 map to ctrl-;</span>

&#20063;&#21487;&#20197;&#23545;&#20854;&#20182;&#38190;&#36827;&#34892;&#32465;&#23450;
(global-set-key (kbd <span style="color: #ffa07a;">"C-[ [ a a"</span>) 'backward-kill-word) <span style="color: #AEAEAE;">;</span><span style="color: #AEAEAE;">== "M-[ a a" iterm2 map to ctrl-backspace</span>
(global-set-key (kbd <span style="color: #ffa07a;">"C-[ [ a b"</span>) 'toggle-eshell-cd)   <span style="color: #AEAEAE;">;</span><span style="color: #AEAEAE;">iterm2 map to ctrl-f2</span>
(global-set-key (kbd <span style="color: #ffa07a;">"C-[ [ a c"</span>) 'hippie-expand)   <span style="color: #AEAEAE;">; </span><span style="color: #AEAEAE;">iterm map to ctrl-return</span>
(global-set-key (kbd <span style="color: #ffa07a;">"C-[ [ a d"</span>) 'bm-previous)   <span style="color: #AEAEAE;">; </span><span style="color: #AEAEAE;">iterm map to ctrl-,</span>
(global-set-key (kbd <span style="color: #ffa07a;">"C-[ [ a e"</span>) 'goto-definition)   <span style="color: #AEAEAE;">; </span><span style="color: #AEAEAE;">iterm map to ctrl-.</span>

</pre>
</div>
<p>
这样就实现了iTerm下的emacs 对C-; 进行绑定了<br />
</p>
</div>
</div>
<div id="outline-container-org16b063f" class="outline-3">
<h3 id="org16b063f">在Finder 中使用iTerm2 中的emacs/emacsclient 打开文件</h3>
<div class="outline-text-3" id="text-org16b063f">
<p>
打开/Applications/Automator.app 文件-&gt;新建-&gt;应用程序<br />
然后选择 实现工具-&gt;运行applescript 脚本<br />
右侧会出现 编辑applescript 脚本的内容， 里面输入以下内容<br />
然后 存储为EmcacClientOpenWith-InIterm2.app<br />
把这个EmcacClientOpenWith-InIterm2.app 移动到/Applications/目录<br />
在Finder 中的文件右键  打开方式 选择 /Applications/EmcacClientOpenWith-InIterm2.app<br />
即可用终端下的emacs/emacsclient 打开此文件<br />
</p>
<div class="org-src-container">
<pre class="src src-applescript">-- -*- coding:utf-8 mode:applescript-*-
-- 打开 automator.app ，然后 文件  选择本目录下的EmcacClientOpenWith-InIterm2.app
-- 本文件只是其txt 格式的备份
-- http://superuser.com/questions/457484/how-to-open-emacs-from-macs-finder
-- https://gist.github.com/ambethia/304964#comment-799519
-- http://superuser.com/questions/662815/how-to-exec-command-in-iterm-2-from-applescript
-- 在Finder 中右键使用emacsclient 打开文件
--  这个需要用automator.app 存成app  ,用applescript.app 存成的app 不行

-- em is my script wrapper for emacsclient

-- #!/bin/sh
-- if [ -z "$1" ]
-- then
--     emacsclient -t
-- else
--     emacsclient -t   "$@"
-- fi


on run {input, parameters}
    tell application "iTerm"
	activate
	if (count of terminals) = 0 then
	    set t to (make new terminal)
	else
	    set t to current terminal

	end if
	tell t
	    set s to (make new session at the end of sessions)
	    tell s
		-- em 命令是 上面注释的emacsclient 脚本，
		-- exec command (("emacs \"" &amp; POSIX path of first item of input as text) &amp; "\"")
		exec command (("em \"" &amp; POSIX path of first item of input as text) &amp; "\"")
	    end tell
	end tell
    end tell
end run
</pre>
</div>
<p>
<img src="/assets/blog/00002-emacs-on-mac.html/automator1.jpg" alt="automator1.jpg" /><br />
<img src="/assets/blog/00002-emacs-on-mac.html/automator2.jpg" alt="automator2.jpg" /><br />
</p>
</div>
</div>
</div>

</div>
</div>
    <div>
      <div class="post-meta">
        <span title="post date" class="post-info">2015-10-17</span>
        <span title="last modification date" class="post-info">2021-09-10</span>
        <span title="tags" class="post-info"><a href="/tags/emacs/">Emacs</a>, <a href="/tags/mac/">Mac</a></span>
        <span title="author" class="post-info">纪秀峰</span>
      </div>
      <section>
        <h1>Comments</h1>
        <div id="disqus_thread"></div>
        <script type="text/javascript">
          //var disqus_developer = 1;
          var disqus_identifier = "/blog/00002-emacs-on-mac.html";
          var disqus_url = "http://jixiuf.github.io/blog/00002-emacs-on-mac.html";
          var disqus_shortname = 'jixiuf';
          /* * * DON'T EDIT BELOW THIS LINE * * */
          (function() {
          var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
          dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
          (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
          })();
        </script>
        <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
        <a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
        <div class="ds-thread"></div>
        <script type="text/javascript">
          var duoshuoQuery = {short_name:'jixiuf'};
          (function() {
          var ds = document.createElement('script');
          ds.type = 'text/javascript';ds.async = true;
          ds.src = 'http://static.duoshuo.com/embed.js';
          ds.charset = 'UTF-8';
          (document.getElementsByTagName('head')[0]
          || document.getElementsByTagName('body')[0]).appendChild(ds);
          })();
        </script>
      </section>
      <script src="http://code.jquery.com/jquery-latest.min.js"></script>
      <!-- <script src="https://cdnjs.cloudflare.com/ajax/libs/prettify/r298/prettify.js"></script> -->
      <script src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
      <script src="/media/js/main.js"></script>
      <div class="footer">
        <p>Generated by <a href="http://www.gnu.org/software/emacs/">Emacs</a> 27.x (<a href="http://orgmode.org">Org mode</a> 9.x)</p>
        <p>
          Copyright &copy; 2012 - <span id="footerYear"></span> <a href="mailto:jixiuf &lt;at&gt; gmail &lt;dot&gt; com">纪秀峰</a>
          &nbsp;&nbsp;-&nbsp;&nbsp;
          Powered by <a href="https://github.com/kelvinh/org-page" target="_blank">org-page</a>
          <script type="text/javascript">document.getElementById("footerYear").innerHTML = (new Date()).getFullYear();</script>
        </p>
      </div>
    </div>

  </body>
</html>
