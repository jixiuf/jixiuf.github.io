<!DOCTYPE html>
<html lang="zh">
  <head>
    <title>etcd 总结 - 拾遗笔记</title>
    <meta charset="utf-8" />
    <meta name="author" content="纪秀峰" />
    <meta name="description" content="etcd 总结" />
    <meta name="keywords" content="etcd go" />
    <link rel="stylesheet" href="/media/css/main.css" type="text/css">
    <!-- <link rel="stylesheet" href="/media/css/prettify.css" type="text/css"> -->
  </head>
  <body class="container">
<script async src="http://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<!-- ji -->
<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-6633117582073327"
     data-ad-slot="1629980291"
     data-ad-format="link"></ins>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>

    
    <div>
      <header class="masthead">
        <h1 class="masthead-title"><a href="/">拾遗笔记</a></h1>
        <p></p>
        <ul>
          <li><a href="/blog/">Blog</a></li>
          <li><a href="/tags/">Tags</a></li>
          <li><a href="/about/">About</a></li>
          <li><a href="http://github.com/jixiuf">GitHub</a></li>
          <li><a href="/rss.xml">RSS</a></li>
        </ul>
        <form method="get" id="searchform" action="http://www.google.com/search">
          <input type="text" class="field" name="q" id="s" placeholder="Search">
          <input type="hidden" name="as_sitesearch" value="jixiuf.github.io">
        </form>
      </header>
    </div>

<div>
<div class="post">
<h1>etcd 总结</h1>
<div id="table-of-contents">
<h2>Table of Contents</h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#org2b3f499">etc 简介</a></li>
<li><a href="#org45d4e05">etcd 单实例</a>
<ul>
<li><a href="#orgb6a4b2a">测试效果</a></li>
</ul>
</li>
<li><a href="#org37801be">etcd 集群</a>
<ul>
<li><a href="#org2c8e7c6">静态服务发现</a></li>
<li><a href="#org08535e4">etcd服务发现</a></li>
</ul>
</li>
<li><a href="#org995543e">link</a></li>
</ul>
</div>
</div>
<div id="outline-container-org2b3f499" class="outline-2">
<h2 id="org2b3f499">etc 简介</h2>
<div class="outline-text-2" id="text-org2b3f499">
<p>
<a href="https://github.com/coreos/etcd">etcd</a> = etc  distributed<br />
/etc 是unix 系 下的一个目录， 这个目录的作用是  放一些基本的配置文件<br />
而<a href="https://github.com/coreos/etcd">etcd</a>  在etc 的名字基础上加了个d (distributed)<br />
意即  分布式etc<br />
最基本的功能是来代替 配置文件的<br />
配置文件格式基本是key=value 这种，所以<a href="https://github.com/coreos/etcd">etcd</a>  可以认为是一个 高分布式 key/value 存储服务<br />
<a href="https://github.com/coreos/etcd">etcd</a>  的定位是来 代替配置文件的，<br />
所以其吞吐量不会很高 (单实例 每秒1000次写操作)<br />
你要是拿它来作redis memcache 用那就大错特错了<br />
<a href="https://github.com/coreos/etcd">etcd</a>  除代替配置文件的功能外 还有服务发现（service discovery） 的功能<br />
它提供了数据TTL失效、数据改变监视、多值、目录监听、分布式锁原子操作等功能，可以方便的跟踪并管理集群节点的状态<br />
使用golang 编写，类似功能的有<br />
</p>
<ol class="org-ol">
<li><a href="http://zookeeper.apache.org/">Zookeeper</a> (java具说维护起来很复杂) ,<br /></li>
<li><a href="https://github.com/ha/doozerd">Doozer</a>(golang，具说不怎么活跃，看了下代码最后一次提交2013,今年2016)<br /></li>
</ol>
<p>
官方给的一段描述<br />
<a href="https://github.com/coreos/etcd">etcd</a>  is a distributed, consistent key-value store for shared configuration and service discovery, with a focus on being:<br />
</p>
<ul class="org-ul">
<li>Simple: curl'able user-facing API (HTTP+JSON)<br /></li>
<li>Secure: optional SSL client cert authentication<br /></li>
<li>Fast: benchmarked 1000s of writes/s per instance<br /></li>
<li>Reliable: properly distributed using Raft<br /></li>
</ul>
</div>
</div>

<div id="outline-container-org45d4e05" class="outline-2">
<h2 id="org45d4e05">etcd 单实例</h2>
<div class="outline-text-2" id="text-org45d4e05">
<div class="org-src-container">
<pre class="src src-sh">jixiuf@jfmac ~ $ etcd
</pre>
</div>
<p>
启动后的效果<br />
</p>
<blockquote>
<p>
2016/01/25 19:01:02 etcd: no data-dir provided, using default data-dir ./default.etcd<br />
2016/01/25 19:01:02 etcd: already initialized as member before, starting as etcd member&#x2026;<br />
2016/01/25 19:01:02 etcd: listening for peers on <a href="http://localhost:2380">http://localhost:2380</a><br />
2016/01/25 19:01:02 etcd: listening for peers on <a href="http://localhost:7001">http://localhost:7001</a><br />
2016/01/25 19:01:02 etcd: listening for client requests on <a href="http://localhost:2379">http://localhost:2379</a><br />
2016/01/25 19:01:02 etcd: listening for client requests on <a href="http://localhost:4001">http://localhost:4001</a><br />
2016/01/25 19:01:02 etcdserver: datadir is valid for the 2.0.1 format<br />
2016/01/25 19:01:02 etcdserver: recovered store from snapshot at index 10001<br />
2016/01/25 19:01:02 etcdserver: name = default<br />
2016/01/25 19:01:02 etcdserver: data dir = default.etcd<br />
2016/01/25 19:01:02 etcdserver: member dir = default.etcd/member<br />
2016/01/25 19:01:02 etcdserver: heartbeat = 100ms<br />
2016/01/25 19:01:02 etcdserver: election = 1000ms<br />
2016/01/25 19:01:02 etcdserver: snapshot count = 10000<br />
2016/01/25 19:01:02 etcdserver: advertise client URLs = <a href="http://localhost:2379,http//localhost:4001">http://localhost:2379,http//localhost:4001</a><br />
2016/01/25 19:01:02 etcdserver: loaded cluster information from store: default=<a href="http://localhost:2380,default=http//localhost:7001">http://localhost:2380,default=http//localhost:7001</a><br />
2016/01/25 19:01:02 etcdserver: restart member ce2a822cea30bfca in cluster 7e27652122e8b2ae at commit index 11019<br />
2016/01/25 19:01:02 raft: ce2a822cea30bfca became follower at term 2<br />
2016/01/25 19:01:02 raft: newRaft ce2a822cea30bfca [peers: [ce2a822cea30bfca], term: 2, commit: 11019, applied: 10001, lastindex: 11019, lastterm: 2]<br />
2016/01/25 19:01:04 raft: ce2a822cea30bfca is starting a new election at term 2<br />
2016/01/25 19:01:04 raft: ce2a822cea30bfca became candidate at term 3<br />
2016/01/25 19:01:04 raft: ce2a822cea30bfca received vote from ce2a822cea30bfca at term 3<br />
2016/01/25 19:01:04 raft: ce2a822cea30bfca became leader at term 3<br />
2016/01/25 19:01:04 raft.node: ce2a822cea30bfca elected leader ce2a822cea30bfca at term 3<br />
2016/01/25 19:01:04 etcdserver: published {Name:default ClientURLs:[<a href="http://localhost:2379">http://localhost:2379</a> <a href="http://localhost:4001">http://localhost:4001</a>]} to cluster 7e27652122e8b2ae<br />
</p>
</blockquote>
</div>
<div id="outline-container-orgb6a4b2a" class="outline-3">
<h3 id="orgb6a4b2a">测试效果</h3>
<div class="outline-text-3" id="text-orgb6a4b2a">
<div class="org-src-container">
<pre class="src src-sh">&#40664;&#35748; 2379 &#31471;&#21475;&#26159;&#32473;client &#36830;&#25509;&#29992;&#30340;
&#32780; 2380  &#21017;&#22312;etcd &#38598;&#32676; &#21508;&#20010;&#33410;&#28857;&#20043;&#38388;&#20132;&#20114;&#29992;&#30340;
&#20860;&#23481;&#32769;&#29256;&#26412;&#20250;&#21516;&#26102;&#24320;&#25918;4001 7001
curl -L http://127.0.0.1:2379/v2/keys/mykey -XPUT -d <span style="color: #40E0D0;">value</span>=<span style="color: #ffa07a;">"this is awesome"</span>
curl -L http://127.0.0.1:2379/v2/keys/mykey

curl -L http://127.0.0.1:4001/v2/keys/mykey2 -XPUT -d <span style="color: #40E0D0;">value</span>=<span style="color: #ffa07a;">"this is awesome"</span>
curl -L http://127.0.0.1:4001/v2/keys/mykey2
</pre>
</div>
<p>
详细的 api 官网readme 里有链接， 这里只给出 set get 示例<br />
</p>
</div>
</div>
</div>
<div id="outline-container-org37801be" class="outline-2">
<h2 id="org37801be">etcd 集群</h2>
<div class="outline-text-2" id="text-org37801be">
<p>
官网文档 <a href="https://github.com/coreos/etcd/blob/master/Documentation/clustering.md">https://github.com/coreos/etcd/blob/master/Documentation/clustering.md</a><br />
</p>
</div>
<div id="outline-container-org2c8e7c6" class="outline-3">
<h3 id="org2c8e7c6">静态服务发现</h3>
<div class="outline-text-3" id="text-org2c8e7c6">
<p>
这种方式需要在启动etcd的时候，确定etcd node的ip，使用-peers | &#x2013;initial-cluster来指定集群成员<br />
这种方式 需要事先知道要启动几个节点， 及各节点的ip:port 等<br />
下面在3台机器上启动etcd<br />
etcd 可以通过参数与环境变量进行配置<br />
 -my-flag 与 ETCD_MY_FLAG 是等价的,参数可以覆盖环境变量<br />
注意<br />
</p>
<ol class="org-ol">
<li>-name 值 与 -initial-cluster中名称要对应上<br /></li>
<li>-data-dir 指定数据存到哪个目录 默认是"${name}.etcd<br /></li>
<li>-initial-cluster-token etcd-cluster-1 需要保证每个节点设置相同的值,作用只是避免混乱，<br />
比如你在同一台机器上配置了多个集群， 此值可避免不同集群节点间混乱<br /></li>
<li>-listen-client-urls 指定 哪此端口对client 开放<br /></li>
<li>-listen-peer-urls default: "<a href="http://localhost:2380,http//localhost:7001">http://localhost:2380,http//localhost:7001</a>" 节点之间的流量走这个端口 可以https<br /></li>
<li>-initial-cluster-state new<br />
("new" or "existing"). Set to new for all members present during<br />
initial static or DNS bootstrapping. If this option is set to<br />
existing, etcd will attempt to join the existing cluster. If the<br />
wrong value is set, etcd will attempt to start but fail safely.<br /></li>
<li><p>
-advertise-client-urls<br />
List of this member's client URLs to advertise to the rest of the cluster.<br />
它是把当前运行的etcd的client URL地址通知给cluster中的其它成员<br />
Be careful if you are advertising URLs such as<br />
<a href="http://localhost:2379">http://localhost:2379</a> from a cluster member and are using the<br />
proxy feature of etcd. This will cause loops, because the proxy<br />
will be forwarding requests to itself until its resources<br />
(memory, file descriptors) are eventually depleted.<br />
在使用etcd 的proxy 时 ，需要特别注意<br />
需要特别注意的是如果多个地址，用逗号隔开，而不是写多次参数<br />
</p>
<div class="org-src-container">
<pre class="src src-sh">etcd -name cave -initial-advertise-peer-urls http://10.44.37.249:2380 <span style="color: #ffa07a;">\</span>
 -listen-peer-urls http://10.44.37.249:2380 <span style="color: #ffa07a;">\</span>
 -listen-client-urls http://127.0.0.1:2379,http://10.44.37.249:2379 <span style="color: #ffa07a;">\</span>
 -advertise-client-urls http://10.44.37.249:2379,http://127.0.0.1:2379

</pre>
</div></li>
</ol>


<p>
listen-client-urls 对client 开放， 即你curl set get 时用的端口<br />
而 2380 用来节点间通信<br />
node1<br />
</p>
<div class="org-src-container">
<pre class="src src-sh">etcd -name infra0 -initial-advertise-peer-urls http://127.0.0.1:2380 <span style="color: #ffa07a;">\</span>
       -listen-peer-urls http://127.0.0.1:2380 <span style="color: #ffa07a;">\</span>
       -listen-client-urls http://127.0.0.1:2379 <span style="color: #ffa07a;">\</span>
       -advertise-client-urls http://127.0.0.1:2379 <span style="color: #ffa07a;">\</span>
       -initial-cluster-token etcd-cluster-1 <span style="color: #ffa07a;">\</span>
       -initial-cluster <span style="color: #40E0D0;">infra0</span>=http://127.0.0.1:2380,<span style="color: #40E0D0;">infra1</span>=http://127.0.0.1:3380,<span style="color: #40E0D0;">infra2</span>=http://127.0.0.1:4380 <span style="color: #ffa07a;">\</span>
       -initial-cluster-state new
</pre>
</div>
<p>
node2<br />
</p>
<div class="org-src-container">
<pre class="src src-sh">etcd -name infra1 -initial-advertise-peer-urls http://127.0.0.1:3380 <span style="color: #ffa07a;">\</span>
       -listen-peer-urls http://127.0.0.1:3380 <span style="color: #ffa07a;">\</span>
       -listen-client-urls http://127.0.0.1:3379 <span style="color: #ffa07a;">\</span>
       -advertise-client-urls http://127.0.0.1:3379 <span style="color: #ffa07a;">\</span>
       -initial-cluster-token etcd-cluster-1 <span style="color: #ffa07a;">\</span>
       -initial-cluster <span style="color: #40E0D0;">infra0</span>=http://127.0.0.1:2380,<span style="color: #40E0D0;">infra1</span>=http://127.0.0.1:3380,<span style="color: #40E0D0;">infra2</span>=http://127.0.0.1:4380 <span style="color: #ffa07a;">\</span>
       -initial-cluster-state new
</pre>
</div>
<p>
node3<br />
</p>
<div class="org-src-container">
<pre class="src src-sh">etcd -name infra2 -initial-advertise-peer-urls http://127.0.0.1:4380 <span style="color: #ffa07a;">\</span>
       -listen-peer-urls http://127.0.0.1:4380 <span style="color: #ffa07a;">\</span>
       -listen-client-urls http://127.0.0.1:4379 <span style="color: #ffa07a;">\</span>
       -advertise-client-urls http://127.0.0.1:4379 <span style="color: #ffa07a;">\</span>
       -initial-cluster-token etcd-cluster-1 <span style="color: #ffa07a;">\</span>
       -initial-cluster <span style="color: #40E0D0;">infra0</span>=http://127.0.0.1:2380,<span style="color: #40E0D0;">infra1</span>=http://127.0.0.1:3380,<span style="color: #40E0D0;">infra2</span>=http://127.0.0.1:4380 <span style="color: #ffa07a;">\</span>
       -initial-cluster-state new
</pre>
</div>
<p>
验证 集群是否连通<br />
</p>
<div class="org-src-container">
<pre class="src src-sh"><span style="color: #AEAEAE;"># </span><span style="color: #AEAEAE;">&#22312;&#20854;&#20013;&#19968;&#20010;&#33410;&#28857;&#19978;put</span>
curl -L http://127.0.0.1:2379/v2/keys/mykey -XPUT -d <span style="color: #40E0D0;">value</span>=<span style="color: #ffa07a;">"hello"</span>
<span style="color: #AEAEAE;"># </span><span style="color: #AEAEAE;">&#22312;&#20854;&#20182;&#33410;&#28857;&#19978;get &#30475;&#21462;&#21040;&#30340;&#20540;&#26159;&#21542;&#26159;set &#30340;&#20540;</span>
curl -L http://127.0.0.1:2379/v2/keys/mykey
curl -L http://127.0.0.1:3379/v2/keys/mykey
curl -L http://127.0.0.1:4379/v2/keys/mykey
</pre>
</div>
</div>
</div>

<div id="outline-container-org08535e4" class="outline-3">
<h3 id="org08535e4">etcd服务发现</h3>
<div class="outline-text-3" id="text-org08535e4">
</div>
<ul class="org-ul">
<li><a id="orgde73ae4"></a>使用公有 etcd 发现服务（Public etcd Discovery Service）<br />
<div class="outline-text-4" id="text-orgde73ae4">
<p>
从 <a href="https://discovery.etcd.io/new">https://discovery.etcd.io/new</a> 申请size=3 的一个token<br />
然后用这个token 启动3个节点<br />
当3个节点都启动成功后， 集群算启动成功<br />
获得的token 只能使用一次(只能用于一个集群的创建)<br />
但是网速原因 以下代码可能会失败<br />
</p>
<div class="org-src-container">
<pre class="src src-sh">curl <span style="color: #ffa07a;">"https://discovery.etcd.io/new?size=3"</span>
<span style="color: #AEAEAE;">#</span><span style="color: #AEAEAE;">return this:  https://discovery.etcd.io/b3117295b04f74ab53f9ea32fa5a4dcb</span>
</pre>
</div>

<p>
node1<br />
</p>
<div class="org-src-container">
<pre class="src src-sh">etcd -name infra0 -initial-advertise-peer-urls http://127.0.0.1:5380 <span style="color: #ffa07a;">\</span>
       -listen-peer-urls http://127.0.0.1:5380 <span style="color: #ffa07a;">\</span>
       -listen-client-urls http://127.0.0.1:5379 <span style="color: #ffa07a;">\</span>
       -advertise-client-urls http://127.0.0.1:5379 <span style="color: #ffa07a;">\</span>
       -discovery  https://discovery.etcd.io/b3117295b04f74ab53f9ea32fa5a4dcb
</pre>
</div>
<p>
node2<br />
</p>
<div class="org-src-container">
<pre class="src src-sh">etcd -name infra1 -initial-advertise-peer-urls http://127.0.0.1:3380 <span style="color: #ffa07a;">\</span>
       -listen-peer-urls http://127.0.0.1:3380 <span style="color: #ffa07a;">\</span>
       -listen-client-urls http://127.0.0.1:3379 <span style="color: #ffa07a;">\</span>
       -advertise-client-urls http://127.0.0.1:3379 <span style="color: #ffa07a;">\</span>
       -discovery  https://discovery.etcd.io/b3117295b04f74ab53f9ea32fa5a4dcb
</pre>
</div>
<p>
node3<br />
</p>
<div class="org-src-container">
<pre class="src src-sh">etcd -name infra2 -initial-advertise-peer-urls http://127.0.0.1:4380 <span style="color: #ffa07a;">\</span>
       -listen-peer-urls http://127.0.0.1:4380 <span style="color: #ffa07a;">\</span>
       -listen-client-urls http://127.0.0.1:4379 <span style="color: #ffa07a;">\</span>
       -advertise-client-urls http://127.0.0.1:4379 <span style="color: #ffa07a;">\</span>
       -discovery  https://discovery.etcd.io/b3117295b04f74ab53f9ea32fa5a4dcb
</pre>
</div>
</div>
</li>
<li><a id="orgf7897b1"></a>构建自己的 etcd discovery service<br />
<div class="outline-text-4" id="text-orgf7897b1">
<p>
首先要起动一个etcd 或集群用来做discovery service(即有一个已经起动的etcd)<br />
比如我打算建一个size=3的etcd 集群<br />
</p>
<div class="org-src-container">
<pre class="src src-sh">curl -X PUT https://localhost:2379/v2/keys/discovery/6c007a14875d53d9bf0ef5a6fc0257c817f0fb83/_config/size -d <span style="color: #40E0D0;">value</span>=3
</pre>
</div>

<p>
node1<br />
</p>
<div class="org-src-container">
<pre class="src src-sh">etcd -name infra0 -initial-advertise-peer-urls http://127.0.0.1:5380 <span style="color: #ffa07a;">\</span>
       -listen-peer-urls http://127.0.0.1:5380 <span style="color: #ffa07a;">\</span>
       -listen-client-urls http://127.0.0.1:5379 <span style="color: #ffa07a;">\</span>
       -advertise-client-urls http://127.0.0.1:5379 <span style="color: #ffa07a;">\</span>
       -discovery  http://localhost:2379/v2/keys/discovery/6c007a14875d53d9bf0ef5a6fc0257c817f0fb83
</pre>
</div>
<p>
node2<br />
</p>
<div class="org-src-container">
<pre class="src src-sh">etcd -name infra1 -initial-advertise-peer-urls http://127.0.0.1:3380 <span style="color: #ffa07a;">\</span>
       -listen-peer-urls http://127.0.0.1:3380 <span style="color: #ffa07a;">\</span>
       -listen-client-urls http://127.0.0.1:3379 <span style="color: #ffa07a;">\</span>
       -advertise-client-urls http://127.0.0.1:3379 <span style="color: #ffa07a;">\</span>
       -discovery  http://localhost:2379/v2/keys/discovery/6c007a14875d53d9bf0ef5a6fc0257c817f0fb83
</pre>
</div>
<p>
node3<br />
</p>
<div class="org-src-container">
<pre class="src src-sh">etcd -name infra2 -initial-advertise-peer-urls http://127.0.0.1:4380 <span style="color: #ffa07a;">\</span>
       -listen-peer-urls http://127.0.0.1:4380 <span style="color: #ffa07a;">\</span>
       -listen-client-urls http://127.0.0.1:4379 <span style="color: #ffa07a;">\</span>
       -advertise-client-urls http://127.0.0.1:4379 <span style="color: #ffa07a;">\</span>
       -discovery  http://localhost:2379/v2/keys/discovery/6c007a14875d53d9bf0ef5a6fc0257c817f0fb83
</pre>
</div>

<p>
为了安全，在每次启动新的etcd集群时，请务必使用新的discovery token进<br />
行注册。 另外，如果你初始化时启动的节点超过了指定的数量，多余的节点<br />
会自动转化为proxy模式的etcd。<br />
</p>
</div>
</li>
</ul>
</div>
</div>
<div id="outline-container-org995543e" class="outline-2">
<h2 id="org995543e">link</h2>
<div class="outline-text-2" id="text-org995543e">
<p>
<a href="http://www.sel.zju.edu.cn/?p=523">http://www.sel.zju.edu.cn/?p=523</a><br />
</p>
</div>
</div>

</div>
</div>
    <div>
      <div class="post-meta">
        <span title="post date" class="post-info">2016-01-25</span>
        <span title="last modification date" class="post-info">2021-09-10</span>
        <span title="tags" class="post-info"><a href="/tags/golang/">Golang</a>, <a href="/tags/etcd/">Etcd</a>, <a href="/tags/vitess/">Vitess</a></span>
        <span title="author" class="post-info">纪秀峰</span>
      </div>
      <section>
        <h1>Comments</h1>
        <div id="disqus_thread"></div>
        <script type="text/javascript">
          //var disqus_developer = 1;
          var disqus_identifier = "/blog/go_etcd.html";
          var disqus_url = "http://jixiuf.github.io/blog/go_etcd.html";
          var disqus_shortname = 'jixiuf';
          /* * * DON'T EDIT BELOW THIS LINE * * */
          (function() {
          var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
          dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
          (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
          })();
        </script>
        <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
        <a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
        <div class="ds-thread"></div>
        <script type="text/javascript">
          var duoshuoQuery = {short_name:'jixiuf'};
          (function() {
          var ds = document.createElement('script');
          ds.type = 'text/javascript';ds.async = true;
          ds.src = 'http://static.duoshuo.com/embed.js';
          ds.charset = 'UTF-8';
          (document.getElementsByTagName('head')[0]
          || document.getElementsByTagName('body')[0]).appendChild(ds);
          })();
        </script>
      </section>
      <script src="http://code.jquery.com/jquery-latest.min.js"></script>
      <!-- <script src="https://cdnjs.cloudflare.com/ajax/libs/prettify/r298/prettify.js"></script> -->
      <script src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
      <script src="/media/js/main.js"></script>
      <div class="footer">
        <p>Generated by <a href="http://www.gnu.org/software/emacs/">Emacs</a> 27.x (<a href="http://orgmode.org">Org mode</a> 9.x)</p>
        <p>
          Copyright &copy; 2012 - <span id="footerYear"></span> <a href="mailto:jixiuf &lt;at&gt; gmail &lt;dot&gt; com">纪秀峰</a>
          &nbsp;&nbsp;-&nbsp;&nbsp;
          Powered by <a href="https://github.com/kelvinh/org-page" target="_blank">org-page</a>
          <script type="text/javascript">document.getElementById("footerYear").innerHTML = (new Date()).getFullYear();</script>
        </p>
      </div>
    </div>

  </body>
</html>
